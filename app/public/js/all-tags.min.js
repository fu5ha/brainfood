riot.tag("bagview",'<div class="wrapper"><a href="#close" title="Close" class="close">X</a> <div class="top-bar"> <form onsubmit="{save}"> <div class="field"> <label>Bag Name:</label> <input type="text" name="bagname" value="{this.bag.name}"> </div> <button type="submit">Save</button> </form> </div> <div class="table-wrapper"> <table> <tr each="{items}"> <td class="item"> <h4>{this.item.name}</h4> </td> <td class="quantity"> <form> <div class="field"> <label>Quantity:</label> <input type="text" name="{this.item._id}" onchange="quantityChanged(this)" value="{this.number}"> </div> </form> </td> <td class="delete"><a name="{this.item._id}" onclick="removeItemFromBag(this.name)"><i class="fa fa-minus-square-o"></i></a></td> </tr> </table> </div> <div class="bottom-bar"> <div class="col-2"> <p>Total Cost Per Bag: {this.bag.total_cost}</p> </div> </div> </div>',function(t){this.on("mount",function(){this.bag={name:"Bag A",items:[],total_cost:0},t.mounted(this),this.updateCost(),this.items=this.bag.items}),this.on("item-added",function(t){for(var e=0;e<this.bag.items.length;e++)if(this.bag.items[e].item._id===t._id)return this.bag.items[e].number+=1,this.updateCost(),!0;this.bag.items.push({item:t,number:1}),this.updateCost()}),this.updateCost=function(){for(var t=0,e=0;e<this.bag.items.length;e++)t+=this.bag.items[e].item.price*this.bag.items[e].number;this.bag.total_cost=t.toFixed(2),this.items=this.bag.items,this.update()},this.save=function(){this.bag.name=this.bagname.value;var e=function(t){t?window.location.hash="#close":alert("Something went wrong, please try again!")};t.saveBagToDatabase(this.bag,e)},this.on("quantity-changed",function(t){for(var e=0;e<this.bag.items.length;e++)if(this.bag.items[e].item._id===t.name)return this.bag.items[e].number=t.value,void this.updateCost()}),this.on("remove-item",function(t){for(var e=0;e<this.bag.items.length;e++)if(this.bag.items[e].item._id===t)return this.bag.items.splice(e,1),void this.updateCost()})}),riot.tag("bagheader",'<section> <div class=logo> <a href="#" rel="logo"><img src="../images/AZBrainfood_logo.jpg" alt="webpageLogo" width="600" height="164"></a> </div> <ul class="nav"> <li><button><a href="#" rel="EditForm">Edit</a></button></li> </ul> <h4> Click this to change title </h4> <li><button><a href="#" rel="Save">Save</a></button></li> </ul> </div> </section>',function(t){}),riot.tag("contact-list",'<section> <h1>Contact List</h1> <div class="contact-head"> <div class="col"> <h3>Username</h3> </div> <div class="col"> <h3>Email</h3> </div> <div class="col"> <h3>Delete?</h3> </div> </div> <article each="{ opts.users }"> <div class="col"><a href="#" rel="-{ this.username }" class="linkshowuser">{ this.username }</a></div> <div class="col">{ this.email }</div> <div class="col"><a href="#" rel="{ this._id }" class="linkshowuser">delete</a></div> </article> </section>',function(t){}),riot.tag("headertop",'<section> <div class="container"> <div class="col-1"><a href="#" rel="logo"><img src="img/AZBrainfood_logo.png" alt="webpageLogo"></a></div> <div class="col-2"><a href="#inventory" rel="inventoryPage">Inventory</a></div> <div class="col-3"><a href="#order" rel="orderButton">Order</a></div> <div class="col-4"> <a id="top-button" href="#bagView"> <button type="button">View Bag</button> </a> </div> </div> </section>',function(t){}),riot.tag("inventory",'<section class="inventory-header"> <div class="col-1"> <input form="item-selection" type="checkbox" name="sel-all" value="sel-all" onclick="selectAll(this)"> </div> <div class="col-2"> <h2>Item</h2> </div> <div class="col-3"> <h2>Stock</h2> </div> <div class="col-4"> <button type="button" name="add-sel" onclick="{addSelectedToBag}">Add Selected to Bag</button> </div> </section> <table> <tr each="{opts.items}"> <td class="sel-col"> <input form="item-selection" type="checkbox" id="sel-{this._id}" name="sel-{this._id}" value="sel-{this._id}"> </td> <td class="item-col"> <h3>{this.name}</h3> </td> <td class="stock-col"> <form name="{this._id}" onsubmit="changeStock(this.name)"> <input type="text" id="{this._id}-stock" value="{this.stock}"> <button type="submit"><i class="fa fa-floppy-o"></i></button> </form> </td> <td class="submit-col"> <button type="button" name="{this._id}" onclick="addItemToBag(this.name)">Add to Bag</button> </td> </tr> </table>',function(t){this.on("select-all",function(e){if(e.checked)for(var i=0;i<t.items.length;i++)document.getElementById("sel-"+t.items[i]._id).checked=!0;else for(var i=0;i<t.items.length;i++)document.getElementById("sel-"+t.items[i]._id).checked=!1}),this.on("mount",function(){t.mounted(this)}),this.addSelectedToBag=function(){for(var e=0;e<t.items.length;e++)document.getElementById("sel-"+t.items[e]._id).checked&&t.addItemToBag(t.items[e]._id)},this.on("delete-selected",function(){for(var e=0;e<t.items.length;e++)document.getElementById("sel-"+t.items[e]._id).checked&&t.deleteItem(t.items[e]._id)}),this.on("renewData",function(e){t.renewData(function(i){t.items=i,t.items.sort(),e()})}),this.on("data_loaded",function(e){t.items=e,t.items.sort(),this.update()}),this.addItemToBag=function(e){t.addItemToBag(e)},this.on("stock-changed",function(){this.update()})}),riot.tag("new-item",'<div class="wrapper"><a href="#close" title="Close" class="close">X</a> <h2>New Item</h2> <form id="new-item-form" onsubmit="{this.createItem}"> <div class="field"> <label>Item #</label> <input type="text" name="number"> </div> <div class="field"> <label>Item Name</label> <input type="text" name="name"> </div> <div class="field"> <label>Units Per Pack</label> <input type="text" name="units"> </div> <div class="field"> <label>Price</label> <input type="text" name="price"> </div> <div class="field"> <label>Stock</label> <input type="text" name="stock"> </div> <button type="submit">Add Item</button> </form> </div>',function(t){this.on("mount",function(){document.getElementById("new-item-form").addEventListener("submit",function(t){t.preventDefault()})}),this.createItem=function(){var e={item_number:parseInt(this.number.value),name:this.name.value,pack:parseInt(this.units.value),price:parseFloat(this.price.value),stock:parseInt(this.stock.value)};t.createNewItem(e,function(t){t?(window.location.hash="#close",this.number.value="",this.name.value="",this.units.value="",this.price.value="",this.stock.value=""):alert("Something went wrong. Please try again!")})}}),riot.tag("new-school",'<div class="wrapper"><a href="#close" title="Close" class="close">X</a> <h2>New Item</h2> <form id="new-school-form" onsubmit="{this.createSchool}"> <div class="field"> <label>School Name</label> <input type="text" name="name"> </div> <div class="field"> <label>Number of Bags</label> <input type="text" name="bags"> </div> <button type="submit">Add Item</button> </form> </div>',function(t){this.on("mount",function(){document.getElementById("new-school-form").addEventListener("submit",function(t){t.preventDefault()})}),this.createSchool=function(){var e={name:this.name.value,bag:[],bags:parseInt(this.bags.value)};t.createNewSchool(e,function(t){t?(window.location.hash="#close",this.name.value="",this.bags.value=""):alert("Something went wrong. Please try again!")})}}),riot.tag("order",'<section class="order-header"> <div class="col-1"> <h2>School</h2> </div> <div class="col-2"> <button type="button" onclick="assignAll()">Assign All</button> <h2>Bag</h2> </div> <div class="col-3"> <h2>#</h2> </div> </section> <table> <tr each="{opts.schools}"> <td class="school-col"> <h3>{this.name}</h3> </td> <td class="bags-col"> <select id="sel-{this._id}" class="bag-select"> <option each="{lbag in parent.opts.bags}" value="{lbag._id}">{lbag.name}</option> </select> </td> <td class="num-col"> <input type="text" name="{this.bag._id}" onchange="bagNumberChanged(this)" value="{this.bags}"> </td> <td class="submit-col"> <button type="button" name="{this._id}" onclick="schoolSubmitted(this.name)">Submit</button> </td> </tr> </table>',function(t){this.on("mount",function(){t.mounted(this)}),this.on("school-submitted",function(e){var i=document.getElementById("sel-"+e),s=i.options[i.selectedIndex].value;t.submitSchool(e,s)}),this.on("renewData",function(e){t.renewData(function(i){t.schools=i[0],t.bags=i[1],e()})}),this.on("data_loaded",function(e){t.schools=e[0],t.bags=e[1],console.log(t.schools),console.log(t.bags),this.update()}),this.addItemToBag=function(e){t.addItemToBag(e)}});